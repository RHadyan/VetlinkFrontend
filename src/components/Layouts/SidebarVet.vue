<template>
  <aside class="relative bg-sidebar h-screen w-80 hidden sm:block shadow-xl">
    <div class="p-2 justify-center flex">
      <a
        href="index.html"
        class="text-white text-3xl font-semibold uppercase hover:text-gray-300"
      >
        <img src="@/assets/images/logo.png" alt="" class="w-64" />
      </a>
    </div>

    <nav class="text-white text-base flex flex-col font-semibold">
      <router-link
        to="/daftarkunjungan"
        class="flex mx-3 my-2 gap-2 rounded-lg items-center text-gray-500 py-3 pl-5 nav-item transition duration-300 ease-in-out"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="21"
          height="34"
          viewBox="0 0 28 34"
          fill="none"
          :class="{
            'active-svg': isActiveRoute('/daftarkunjungan'),
            'not-active-svg': !isActiveRoute('/daftarkunjungan'),
          }"
        >
          <path
            d="M0 9.86806V26.7847C0 30.6713 3.1402 33.8333 7 33.8333H21C24.8598 33.8333 28 30.6713 28 26.7847V9.86806H0ZM14 25.375H8.4C7.6272 25.375 7 24.7449 7 23.9653C7 23.1857 7.6272 22.5556 8.4 22.5556H14C14.7728 22.5556 15.4 23.1857 15.4 23.9653C15.4 24.7449 14.7728 25.375 14 25.375ZM19.6 18.3264H8.4C7.6272 18.3264 7 17.6962 7 16.9167C7 16.1371 7.6272 15.5069 8.4 15.5069H19.6C20.3728 15.5069 21 16.1371 21 16.9167C21 17.6962 20.3728 18.3264 19.6 18.3264ZM28 7.04861H0C0 3.16201 3.1402 0 7 0H21C24.8598 0 28 3.16201 28 7.04861Z"
            fill="#BABABA"
          />
        </svg>
        Daftar Kunjungan
      </router-link>

      <router-link
        to="/forumvet"
        class="mx-3 my-2 gap-2 rounded-lg flex items-center text-gray-500 py-3 pl-5 nav-item transition duration-300 ease-in-out"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="22"
          height="28"
          viewBox="0 0 28 28"
          fill="none"
          :class="{
            'active-svg': isActiveRoute('/forumvet'),
            'not-active-svg': !isActiveRoute('/forumvet'),
          }"
        >
          <path
            class=" "
            d="M21 13.9977V5.83236C21 2.6164 18.3832 0 15.1667 0H5.83333C2.61683 0 0 2.6164 0 5.83236V20.8262C0 21.7512 0.5075 22.5981 1.323 23.0355C1.694 23.235 2.10117 23.3329 2.50717 23.3329C2.9925 23.3329 3.47667 23.1918 3.89667 22.913L8.52017 19.83H15.1667C18.3832 19.83 21 17.2136 21 13.9977ZM10.5 16.3353C9.856 16.3353 9.33333 15.8127 9.33333 15.1688C9.33333 14.5249 9.856 14.0023 10.5 14.0023C11.144 14.0023 11.6667 14.5249 11.6667 15.1688C11.6667 15.8127 11.144 16.3353 10.5 16.3353ZM12.1882 11.2366C11.6667 11.5236 11.6667 11.6076 11.6667 11.6694C11.6667 12.3144 11.144 12.8359 10.5 12.8359C9.856 12.8359 9.33333 12.3144 9.33333 11.6694C9.33333 10.1436 10.5443 9.47759 11.0612 9.19297C11.3995 9.0075 11.7553 8.56891 11.6468 7.94951C11.5663 7.49225 11.1778 7.10382 10.7217 7.0245C10.3647 6.95917 10.0193 7.05016 9.751 7.27645C9.485 7.49808 9.33333 7.8247 9.33333 8.17114C9.33333 8.8162 8.81067 9.33761 8.16667 9.33761C7.52267 9.33761 7 8.8162 7 8.17114C7 7.13414 7.45617 6.15664 8.25067 5.48942C9.04517 4.8222 10.0905 4.53991 11.1242 4.72771C12.5347 4.97384 13.6955 6.13331 13.944 7.54708C14.2042 9.03083 13.4983 10.5134 12.187 11.2378L12.1882 11.2366ZM28 10.4983V25.4921C28 26.4171 27.4925 27.264 26.677 27.7014C26.306 27.9009 25.8988 27.9988 25.4928 28C25.0075 28 24.5233 27.8589 24.1045 27.5801L19.4798 24.4959H12.8333C11.1417 24.4959 9.6285 23.7599 8.56217 22.6062L9.226 22.163H15.1667C19.6688 22.163 23.3333 18.4991 23.3333 13.9977V5.83236C23.3333 5.47309 23.3018 5.12315 23.2575 4.77554C25.9537 5.28879 28 7.65556 28 10.4983Z"
            fill=""
          />
        </svg>
        Forum Post
      </router-link>

      <button @click="handleLogout" class="my-5 justify-items-center">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="134"
          height="34"
          viewBox="0 0 134 34"
          fill="none"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M17 0C7.61116 0 0 7.61116 0 17C0 26.3888 7.61116 34 17 34H117C126.389 34 134 26.3888 134 17C134 7.61116 126.389 0 117 0H17ZM41.2849 12.53H39.1849V23H44.7349V21.335H41.2849V12.53ZM49.7597 23.135C52.1747 23.135 54.0947 21.455 54.0947 18.845C54.0947 16.22 52.2197 14.555 49.8197 14.555C47.4197 14.555 45.5447 16.22 45.5447 18.845C45.5447 21.455 47.3597 23.135 49.7597 23.135ZM49.7597 21.305C48.6347 21.305 47.6747 20.495 47.6747 18.845C47.6747 17.18 48.6797 16.385 49.7897 16.385C50.8997 16.385 51.9347 17.18 51.9347 18.845C51.9347 20.495 50.8697 21.305 49.7597 21.305ZM58.8901 14.555C56.7751 14.555 55.0951 16.22 55.0951 18.815C55.0951 21.41 56.7751 23.135 58.8901 23.135C60.1951 23.135 61.1401 22.49 61.6351 21.77V23.06C61.6351 24.605 60.7351 25.265 59.5801 25.265C58.5301 25.265 57.7501 24.77 57.5401 24.02H55.4551C55.6651 25.925 57.3001 27.095 59.6401 27.095C62.3701 27.095 63.7501 25.31 63.7501 23.06V14.69H61.6351V15.875C61.1401 15.155 60.1951 14.555 58.8901 14.555ZM59.4301 16.4C60.5851 16.4 61.6351 17.27 61.6351 18.845C61.6351 20.42 60.5851 21.29 59.4301 21.29C58.3051 21.29 57.2401 20.39 57.2401 18.815C57.2401 17.24 58.3051 16.4 59.4301 16.4ZM74.2353 23.105C77.2053 23.105 79.5903 20.885 79.5903 17.735C79.5903 14.6 77.2203 12.38 74.2353 12.38C71.2803 12.38 68.8653 14.6 68.8653 17.735C68.8653 20.885 71.2803 23.105 74.2353 23.105ZM74.2353 21.23C72.3303 21.23 71.0253 19.865 71.0253 17.735C71.0253 15.605 72.3303 14.27 74.2353 14.27C76.1253 14.27 77.4303 15.605 77.4303 17.735C77.4303 19.865 76.1253 21.23 74.2353 21.23ZM86.8827 23H88.9977V14.69H86.8827V19.265C86.8827 20.6 86.1627 21.32 85.0227 21.32C83.9127 21.32 83.1777 20.6 83.1777 19.265V14.69H81.0777V19.565C81.0777 21.845 82.4727 23.105 84.4077 23.105C85.4427 23.105 86.3577 22.655 86.8827 21.95V23ZM91.3997 16.415V20.42C91.3997 22.325 92.4647 23 94.0547 23H95.3747V21.23H94.3997C93.7397 21.23 93.5147 20.99 93.5147 20.435V16.415H95.3747V14.69H93.5147V12.635H91.3997V14.69H90.4097V16.415H91.3997Z"
            fill="#FF004E"
            class="hover:fill-[#B08BBB]"
          />
        </svg>
      </button>
    </nav>
  </aside>
</template>

<script>
import { useRoute } from "vue-router";
import { useAuth } from "../../composable/Auth"; // Adjust the path to where your Auth.js file is located

export default {
  setup() {
    const route = useRoute();
    const { logout } = useAuth(); // Import the logout function

    // Function to check if the current route is active
    const isActiveRoute = (path) => route.path === path;

    // Function to handle logout
    const handleLogout = () => {
      logout();
    };

    return { isActiveRoute, handleLogout };
  },
};
</script>

<style>
.active-nav-link {
  color: blue;
  font-weight: bold;
}
</style>
